


<div id="wp" class="wp">
<link rel="stylesheet" type="text/css" href="http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/css/reset.css" />
<link rel="stylesheet" type="text/css" href="http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/css/common.css" />
<script src="http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/js/jquery.min.js" type="text/javascript"></script>
<script src="http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/js/jqueryui.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/css/jqueryui/jqueryui.css" />
<style>

body {
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/bg_01.jpg') top center no-repeat #fff;
font:Arial,Helvetica,sans-serif;
}

#header {
width:960px;
margin:0 auto;
position:relative;
}

#turnplatewrapper {
height:592px;
width:592px;
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_06.png') top left no-repeat;
/*_background:url('source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_06_8.png') top left no-repeat;*/
left:200px;
top:20px;
position:absolute;
-moz-user-select:none;
user-select:none;
}

#turnplate {
height:592px;
width:592px;
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_05.png') top left no-repeat;
/*_background:url('source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_05_8.png') top left no-repeat;*/
}

#turnplate #awards {
position:absolute;
width:100%;
height:100%;
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_03.png') top left no-repeat;
/*_background:url('source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_03_8.png') top left no-repeat;*/
}

#platebtn {
position:absolute;	
top:218px;
left:218px;
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_04.png') top left no-repeat;
/*_background:url('source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_04_8.png') top left no-repeat;*/
height:155px;
width:155px;
cursor:pointer;
}

#platebtn.hover {
background-position:0 -155px 
}

#turnplate #platebtn.click {
background-position:0 -310px 
}

#gift {
width:398px;			
height:89px;
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_gift_01.png') top left no-repeat;
/*_background:url('source/plugin/itcast_lottery_draw/template/red/img/turnplate/plate_gift_01_8.png') top left no-repeat;*/
position:absolute;
left:90px;
top:720px;
}

#msg {
position:absolute;
display:none;
top:130px;
left:130px;
border-radius:5px;
border:5px solid #FED33f;
box-shadow:2px 2px 2px rgba(0,0,0,0.6);
background:#fffcf2;
width:320px;
color:#000;
font-size:14px;
padding:10px;
text-align:center;
}

#content {
width:100%;
height:650px;/*margin:0 auto;*/
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/bg.png') center no-repeat;
}



#init {
position:absolute;
top:50%;
left:50%;
width:100px;
height:30px;
border-radius:5px;
color:#333;
border:3px solid #FED33f;
box-shadow:2px 2px 2px rgba(0,0,0,0.6);
background:#fffcf2;
width:250px;
padding:10px;
margin-top:-30px;
margin-left:-138px;
text-align:center;
opacity:0.9;
filter:alpha(opacity=90);
}


#lotteryMsg {

}

#lotteryMsg .msg {
font-size:16px;
color:red;
    font-weight:bold; 
    text-align:center;
    font-size:26px;
    color:#ba0f54;
    line-height:1;
margin-bottom:10px;
}

#lotteryMsg .tips {
    text-align:center;
    font-size:14px;
}

#lotteryMsg .sp {
    border-top:1px solid #c3c3c3;
    border-bottom:0 none transparent;
    border-right:0 none transparent;
    border-left:0 none transparent;
    overflow:hidden;
    height:0;
    margin:10px 0;
}

#lotteryMsg a {
color:#138cbe;
}

#lotteryMsg a:hover {
    color:#039;
}

#lotteryMsg .content {
border:1px solid #ccc;
border-radius:5px;
padding:10px;
background:#fff;
line-height:1.5;
}

#top-menu-wrapper {
height:51px;
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/bg_02.png') top center repeat-x;
margin-bottom:-51px;
}

#top-menu {
width:960px;
margin:0 auto;
color:#fff;
}

#top-menu a, #top-menu span {
line-height:50px;
display:inline-block;
font-size:16px;
text-decoration:1px 1px 2px rgba(0, 0, 0, 0.3);
}

#top-menu .user {
padding-left:30px;
display:inline-block;
height:50px;
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/bg_03.png') 0 16px no-repeat;
}

</style>
<style>
body .ui-dialog {
padding:0px;
background:#ebeae3;
box-shadow:2px 2px 5px rgba(0,0,0,0.5);
}

body .ui-dialog .ui-dialog-titlebar {
height:23px;
padding:0;
margin:0;
background:none;
border:0 none transparent;
}

body .ui-dialog .ui-dialog-titlebar .ui-dialog-title {
display:none;
}

body .ui-widget-content {
border:4px solid #F7D102;
}

body .ui-dialog .ui-dialog-titlebar-close {
background:#f6d20d;
right:0;
margin-top:-12px;
}

body .ui-dialog .ui-dialog-buttonpane {
    border:0 none transparent;
}

body .ui-dialog .ui-button-text {
    padding:0.8em 1em;
}

body .ui-widget-overlay {
background:url('http://bbs.itcast.cn/source/plugin/itcast_lottery_draw/template/red/img/turnplate/bg_04.png');
_filter:alpha(opacity=60);
}

.mv5 {
    margin-left:5px;
    margin-right:5px;
}
</style>

<!-- 滚动开始 -->
<style type="text/css">
/* ranklist */
.ranklist{height:248px;overflow:hidden;}
.ranklist li{height:16px;line-height:16px;text-align:left;overflow:hidden;position:relative;padding-left:60px;margin:0 0 10px 0;}
.ranklist li em{width:50px;height:16px;overflow:hidden;display:block;position:absolute;left:0;top:0;text-align:center;font-style:normal;color:#333;}
.ranklist li .num{position:absolute;right:0;top:0;color:#999;}
.drawset {width:100%;height:110px;}
.drawset li {list-style:none;float:left;padding:4px}
</style>
<script type="text/javascript">
(function($){

$.fn.myScroll = function(options){
var defaults = {
speed:40,  
rowHeight:24 
};

var opts = $.extend({}, defaults, options),intId = [];

function marquee(obj, step){

obj.find("ul").animate({
marginTop: '-=1'
},0,function(){
var s = Math.abs(parseInt($(this).css("margin-top")));
if(s >= step){
$(this).find("li").slice(0, 1).appendTo($(this));
$(this).css("margin-top", 0);
}
});
}

this.each(function(i){
var sh = opts["rowHeight"],speed = opts["speed"],_this = $(this);
intId[i] = setInterval(function(){
if(_this.find("ul").height()<=_this.height()){
clearInterval(intId[i]);
}else{
marquee(_this, sh);
}
}, speed);

_this.hover(function(){
clearInterval(intId[i]);
},function(){
intId[i] = setInterval(function(){
if(_this.find("ul").height()<=_this.height()){
clearInterval(intId[i]);
}else{
marquee(_this, sh);
}
}, speed);
});

});

}

})($);

$(function(){

$("div.ranklist").myScroll({
speed:40,
rowHeight:24
});

});
</script>
<!-- 滚动结束 -->

<div id="header">
<div id="turnplatewrapper" onselectstart="return false;" class="bgfix">
<div id="turnplate" class="bgfix">
<div id="awards" class="bgfix">
</div>
<div id="platebtn" class="bgfix">
</div>
<p id="msg">
</p>
<p id="init" class="dn">
初始化中，请稍后...<span></span>
</p>
</div>
</div>
<div id="gift" class="bgfix">
</div>
</div>

<div id="content">
<div id="top-menu">
<div class="l" style="color:#000; font-weight:bold;"><span id="indexid" style="display:none">0</span><span>您今天还有 <b><span class="lottery-times">2</span></b> 次抽奖机会</span></div>
</div>
</div>
<script type="text/javascript">
$(function(){
//滚动插件
(function($){
$.fn.extend({
Scroll:function(opt,callback){
//参数初始化
if(!opt) var opt={};
var _this=this.eq(0).find("ul:first");
var lineH=_this.find("li:first").height(), //获取行高
line=opt.line?parseInt(opt.line,10):parseInt(this.height()/lineH,10), //每次滚动的行数，默认为一屏，即父容器高度
speed=opt.speed?parseInt(opt.speed,10):5000, //卷动速度，数值越大，速度越慢（毫秒）
timer=opt.timer?parseInt(opt.timer,10):5000; //滚动的时间间隔（毫秒）
if(line==0) line=1;
var upHeight=0-line*lineH;
//滚动函数
scrollUp=function(){
_this.animate({
marginTop:upHeight
},speed,function(){
for(i=1;i<=line;i++){
_this.find("li:first").appendTo(_this);
}
_this.css({marginTop:0});
});
}
//鼠标事件绑定
_this.hover(function(){
clearInterval(timerID);
},function(){
timerID=setInterval("scrollUp()",timer);
}).mouseout();
}        
})
})(jQuery);
$(document).ready(function(){
$("#scrollDiv").Scroll({line:1,speed:500,timer:4000});
if(0 == 0) {
$("#tophtml").html("<script src=static/js/common.js?eIs><\/script>");
}
});	
});
</script>
<div id="tophtml"></div>
<div style="width:100%; height:900px; overflow:hidden;" >
<div style="width:75%;float:left" class="cjgz"><h3>抽奖规则</h3><p style="font-size:14px; color:#000; line-height:24px; overflow:hidden; padding-left:20px; width:694px;">1、认证会员每日奖励 <b>2</b> 次免费抽奖，每日可参加 <b>5</b> 次有偿抽奖，每次抽奖消耗积分 <b>2</b> 个金币，比普通会员多参加 <b>2</b> 次抽奖；</p><p style="font-size:14px; color:#000; line-height:24px; overflow:hidden; padding-left:20px; width:694px;">2、普通会员不奖励免费抽奖机会，每日只可参加 <b>5</b> 次有偿抽奖，每次抽奖消耗积分 <b>3</b> 个金币，想增加抽奖机会，请<a href="home.php?mod=spacecp&ac=profile&op=verify" style="color:#0A56A9">点击立即认证</a>；</p><h3>抽奖说明</h3><p><p style="margin:0; padding:0; line-height:24px; font-size:14px; overflow:hidden; color:#000; width:694px; padding-left:20px;"><b style="font-size:16px; color:#0279af;">【参加抽奖，超级简单】</b>
<br />1、点击页面"点击抽奖"按钮（参与本活动需要支付论坛金币）。
<br />2、您可以点击"中奖记录"查看您的抽奖情况。
<br />3、会员每天抽奖机会有限制，认证后会更新。
<br /><b style="font-size:16px; color:#0279af;">【兑奖流程】</b>
<br />1、会员参与抽奖之前请先完善相关资料，以便工作人员及时发放奖品，如果您的资料填写不完整，请到“设置”里完善资料。
<br />2、若因信息错误、无效等造成开奖后15个工作日无法与中奖者取得联系，则视中奖者自动放弃该奖品。</p></p><h3>奖项设置</h3><div class="jxs"><ul><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/0.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/1.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/2.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/3.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/4.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/5.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/6.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/7.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/8.jpg" /></li><li style="width:122px; height:150px; margin-right:19px; float:left;"><img src="./source/plugin/itcast_lottery_draw/template/red/trophy/9.jpg" /></li></ul></div></div>
<div class="zjjl"><h3><span style="float:left;">最新中奖记录</span><a href="plugin.php?id=itcast_lottery_draw:itcast_lottery_draw&amp;ac=look" class="myzj">我的中奖记录</a></h3>
<div id="scrollDiv" style="overflow:hidden;">
<ul>
<li><em>玩***</em><p>获得二等奖 音箱</p></li><li><em>哦***</em><p>获得七等奖 百度wifi</p></li><li><em>哈***</em><p>获得五等奖 手机支架</p></li><li><em>l***</em><p>获得一等奖 移动硬盘</p></li><li><em>兄***</em><p>获得三等奖 笔记本套包</p></li><li><em>c***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>y***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>y***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>0***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>8***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>l***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>航***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>航***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>z***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>w***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>叶***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>***</em><p>获得积分奖励(金币+5)</p></li>
<li><em>哈***</em><p>获得积分奖励(金币+5)</p></li>
</ul>
</div>
</div>

<div id="lotteryMsg" class="dn">
<p class="msg"></p>
    <hr class="sp" />
<p class="mv5" style="padding-bottom:5px; line-height:30px; overflow:hidden;">分享到微博/微信/QQ平台截图到这里<a href="http://url.cn/PjsDMs" target="_blank">http://url.cn/PjsDMs</a>即可获得10金币！</p>	
<div class="content mv5">“幸运大转盘，大奖等你来”，快来参与吧，有很多奖品等着你哦！</div>

<div class="bdsharebuttonbox" data-tag="share_1" style="margin-top:20px; margin-left:8px;">
<a class="bds_mshare" data-cmd="mshare"></a>
<a class="bds_qzone" data-cmd="qzone"></a>
<a class="bds_weixin" data-cmd="weixin"></a>
<a class="bds_sqq" data-cmd="sqq"></a>
<a class="bds_tsina" data-cmd="tsina"></a>
<a class="bds_tqq" data-cmd="tqq"></a>
<a class="bds_tqf" data-cmd="tqf"></a>
<a class="bds_tieba" data-cmd="tieba"></a>
<a class="bds_baidu" data-cmd="baidu"></a>
<a class="bds_more" data-cmd="more">更多</a>
</div>

</div>

<script>

var turnplate = {
turnplateBox : $('#turnplate'),
turnplateBtn : $('#platebtn'),
lightDom : $('#turnplatewrapper'),
freshLotteryUrl : '',
msgBox : $('#msg'),
lotteryUrl : '',
height : '592', 
lightSwitch : 0, 
minResistance : 5, 
Cx : 0.01, 
accSpeed : 15, 
accFrameLen : 40, 
maxSpeed : 250, 
minSpeed : 30, 
frameLen : 10, 
totalFrame : 0, 
curFrame : 0, 
curSpeed : 20, 
lotteryTime : 0, 
lotteryIndex : 0, 
errorIndex : 0, 
initBoxEle : $('#turnplate #init'),
progressEle : $('#turnplate #init span'),
initProgressContent : '~~~^_^~~~', 
initFreshInterval : 500, 
virtualDistance : 10000, 
isStop : false, 
timer2 : undefined, 
initTime : undefined,
showMsgTime : 3000, 
lotteryChannel: '',
lotteryTimeCount : 0,

channelList: {
'login': '',
'consume': ''
},

lotteryType : [0,1,2,3,4,5,6,7,8,9],

lotteryList : [],

lotteryDes : [],

init : function() {
this.initAnimate()
this.freshLottery();
this.turnplateBtn.click($.proxy(function(){
this.click();	
},this));	
},

initAnimate : function() {
this.initBoxEle.show();
clearTimeout(this.initTimer);
var curLength = this.progressEle.text().length,
totalLength = this.initProgressContent.length;

if (curLength < totalLength) {
this.progressEle.text(this.initProgressContent.slice(0, curLength + 1));
}else{
this.progressEle.text('');
}
this.initTimer = setTimeout($.proxy(this.initAnimate, this), this.initFreshInterval);
},

stopInitAnimate : function() {
clearTimeout(this.initTimer);
this.initBoxEle.hide();
},

freshLotteryTime : function() {
$('#top-menu').find('.lottery-times').html(this.lotteryTime);
},

freshLottery : function() {
this.stopInitAnimate();
this.setBtnHover();
this.isStop = true;
this.freshLotteryTime();
},

setBtnHover : function() {
$('#platebtn').hover(function(){
$(this).addClass('hover');
},function() {
$(this).removeClass('hover click');
}).mousedown(function(){
$(this).addClass('click');
}).mouseup(function(){
$(this).removeClass('click');
});	
},

lottery : function() {
 
this.lotteryIndex = undefined;
if(this.lotteryTime > 0) {
this.lotteryTime--;
}
this.freshLotteryTime();
this.totalFrame = 0;
this.curSpeed = this.minSpeed;
this.turnAround();	
ltc = this.lotteryTimeCount;
url = "http://bbs.itcast.cn/plugin.php?id=itcast_lottery_draw:ajax&time=" + new Date().getTime();
$.get(url, { todaycount:this.lotteryTimeCount, x:1, one:0, verifyuser:0},
function(data){
if(ltc != 1){
indexd = parseInt(data);
turnplate.lotteryIndex = typeof turnplate.lotteryType[indexd] !== 'undefined' ? turnplate.lotteryType[indexd] : turnplate.errorIndex;
}
});
$("#platebtn").dblclick( function () { alert("单击一次就行啦!");return; });
this.lotteryIndex = typeof this.lotteryType[0] !== 'undefined' ? this.lotteryType[0] : this.errorIndex;
},

click : function() {
if(0 == 0) {
showWindow('login', 'member.php?mod=logging&action=login');
return;
}
if(this.isStop == false) {
this.showMsg('抽奖正在进行中，请稍后...');
return;
} 
if(this.lotteryTime < 1) {
this.showMsg('(⊙o⊙)哦！今天的抽奖次数用完了，明天再来吧！');
return;
}

this.lotteryTimeCount++;
url = "http://bbs.itcast.cn/plugin.php?id=itcast_lottery_draw:ajax&t=" + new Date().getTime();
$.get(url, {x:2, verifyuser:0},
function(data){
jf = parseInt(data);
if(jf == 1) {
turnplate.showMsg('非常抱歉！您的积分已经不足，不能再进行抽奖！');
}else if(jf == 2){
turnplate.showMsg('(⊙o⊙)哦！今天的抽奖次数用完了，明天再来吧！');
}else{
turnplate.lottery();
}
});
if(jf) {
return;
}
},

freshSpeed : function() {
var totalResistance = this.minResistance + this.curSpeed * this.Cx;
var accSpeed = this.accSpeed;
var curSpeed = this.curSpeed;
if(this.totalFrame >= this.accFrameLen) {
accSpeed = 0;
}
curSpeed = curSpeed - totalResistance + accSpeed;

if(curSpeed < this.minSpeed){
curSpeed = this.minSpeed;
}else if(curSpeed > this.maxSpeed){
curSpeed = this.maxSpeed;
}

this.curSpeed  = curSpeed;
},

switchLight : function() {
this.lightSwitch = this.lightSwitch === 0 ? 1 : 0;
var lightHeight = -this.lightSwitch * this.height;
this.lightDom.css('backgroundPosition','0 ' + lightHeight.toString() + 'px');	
},

turnAround : function() {
this.isStop = false;
var intervalTime = parseInt(this.virtualDistance/this.curSpeed);		
this.timer = window.setTimeout('turnplate.changeNext()', intervalTime);		
},

showAwards : function(){
$('#lotteryMsg').dialog('open');
},

showMsg : function(msg, isFresh) {
isFresh = typeof isFresh == 'undefined' ? false : true;

var msgBox = this.msgBox;
var display = msgBox.css('display');

msgBox.html(msg);	

window.clearTimeout(this.timer2);
msgBox.stop(true,true).show();
var fadeOut = $.proxy(function() {
this.msgBox.fadeOut('slow');
}, this);
this.timer2 = window.setTimeout(fadeOut, this.showMsgTime);
},

changeNext : function() {
if(this.lotteryIndex !== undefined && this.curFrame == this.lotteryIndex && this.curSpeed <= this.minSpeed+10 && this.totalFrame > this.accFrameLen) {
this.isStop = true;
this.showAwards();
return; 		
}
var nextFrame =  this.curFrame+1 < this.frameLen ? this.curFrame+1 : 0;
var bgTop = - nextFrame * this.height;		
this.turnplateBox.css('backgroundPosition','0 ' + bgTop.toString() + 'px');	
this.switchLight();
this.curFrame = nextFrame;
this.totalFrame ++;
this.freshSpeed();
this.turnAround();
}
}

$('#lotteryMsg').dialog({
modal: true,
width: 500,
height: 270,
resizable: false,
title: '获奖信息',
autoOpen: false,
open: function(){
var showMsg = turnplate.lotteryList[turnplate.lotteryIndex];
$('#lotteryMsg').find('.msg').html(showMsg);
}

});

turnplate.init();

window._bd_share_config = {
common : {
bdText : '“幸运大转盘，大奖等你来”，快来参与吧，有很多奖品等着你哦！',	
bdDesc : '“幸运大转盘，大奖等你来”，快来参与吧，有很多奖品等着你哦！'
},
share : [{
"bdSize" : 32
}]
}
with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>
<script language="javascript" type="text/javascript">
function killerrors() {
        return true;
}
window.onerror = killerrors;
</script></div></div>
